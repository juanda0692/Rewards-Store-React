(this["webpackJsonpstore-garces-juan-david"]=this["webpackJsonpstore-garces-juan-david"]||[]).push([[0],{33:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(24),a=c.n(s),i=c(2),o=c(9),u=c(8),j=c.n(u),l=c(11),d="https://coding-challenge-api.aerolab.co",b={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTAxYWJhY2Q5MDU1YjAwMjBhNjMzZGEiLCJpYXQiOjE2Mjc0OTk0MzZ9.M7x6M8SXWK4yu70uIXayu8GUSaPMH9M_1s8hfIT1_wA"},O=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/user/me"),{headers:b});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Ocurri\xf3 un error al obtener la informaci\xf3n del servidor",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products"),{headers:b});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Ocurri\xf3 un error al obtener la informaci\xf3n del servidor",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",headers:b},e.prev=1,e.next=4,fetch("".concat(d,"/user/history"),c);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Ocurri\xf3 un error al obtener la informaci\xf3n del servidor",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(j.a.mark((function e(t,c,n){var r,s,a,i,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({amount:t}),s={method:"POST",headers:b,body:r},e.prev=2,e.next=5,fetch("".concat(d,"/user/points"),s);case 5:return a=e.sent,e.next=8,a.json();case 8:i=e.sent,(u=Object(o.a)({},c)).points=i["new Points"],n(u),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),alert("Ocurri\xf3 un error al obtener la informaci\xf3n del servidor",e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,c,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n,r,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify({productId:t}),n={method:"POST",headers:b,body:c},r=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/redeem"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,r();case 6:return s=e.sent,e.next=9,s.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(3),alert("Ocurri\xf3 un error al obtener la informaci\xf3n del servidor",e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),p=c(0),v=Object(n.createContext)(),g=function(e){var t=e.children,c=Object(n.useState)({name:"",points:0}),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){O(a)}),[s.points]),Object(p.jsx)(v.Provider,{value:[s,a],children:t})},C=c(12),N="/Rewards-Store-React";c(33);function y(){var e=Object(n.useContext)(v),t=Object(i.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(!0),a=Object(i.a)(s,2),o=a[0],u=a[1],j=function(e){f(e,c,r)};return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsxs)("div",{className:"header-components",children:[Object(p.jsx)(C.b,{to:"/home",children:Object(p.jsx)("img",{src:"".concat(N,"/assets/aerolab-logo.svg"),alt:"Logo"})}),Object(p.jsxs)("div",{className:"header-user",children:[Object(p.jsx)("span",{children:c.name}),Object(p.jsxs)("div",{className:"header-user_coins",children:[Object(p.jsx)("span",{children:c.points}),Object(p.jsx)("img",{onClick:function(e){e.preventDefault(),u(!o)},src:"".concat(N,"/assets/icons/coin.svg"),alt:"Coin icon"}),o?null:Object(p.jsxs)("ul",{className:"header-menu_coins",children:[Object(p.jsx)("h4",{children:"Add Coins"}),Object(p.jsxs)("li",{onClick:function(){return j(1e3)},children:[Object(p.jsx)("span",{children:"1000"}),Object(p.jsx)("img",{src:"".concat(N,"/assets/icons/coin.svg"),alt:"Coin icon"})]}),Object(p.jsxs)("li",{onClick:function(){return j(5e3)},children:[Object(p.jsx)("span",{children:"5000"}),Object(p.jsx)("img",{src:"".concat(N,"/assets/icons/coin.svg"),alt:"Coin icon"})]}),Object(p.jsxs)("li",{onClick:function(){return j(7500)},children:[Object(p.jsx)("span",{children:"7500"}),Object(p.jsx)("img",{src:"".concat(N,"/assets/icons/coin.svg"),alt:"Coin icon"})]})]})]})]})]}),Object(p.jsx)(C.b,{to:"/redeem-history",children:Object(p.jsx)("button",{className:"header-user_redeemed",type:"button",children:"Redeemed Products"})})]})}var w=c(15);c(42);function k(e){var t=e.img,c=e.name,n=e.cost;return Object(p.jsxs)("article",{className:"productRedeem",children:[Object(p.jsx)("img",{src:t.url,alt:"product reference",className:"productRedeem-img"}),Object(p.jsxs)("div",{className:"productRedeem-info",children:[Object(p.jsx)("b",{children:c}),Object(p.jsxs)("span",{className:"productRedeem-info_cost",children:[Object(p.jsx)("b",{children:"Cost: "}),n,Object(p.jsx)("img",{src:"/assets/icons/coin.svg",alt:"Coin icon"})]})]})]})}c(43);function S(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1];Object(n.useEffect)((function(){x(r)}),[r.length]);var s=Object(w.a)(c).reverse();return Object(p.jsxs)("section",{className:"redeemHistory",children:[Object(p.jsx)("h2",{children:"Redeemed Products"}),Object(p.jsx)("p",{children:"Your most recent redeemed products"}),Object(p.jsx)("div",{className:"redeemHistory-products",children:s.map((function(e){return Object(n.createElement)(k,Object(o.a)(Object(o.a)({},e),{},{key:e.createDate}))}))})]})}function M(){return Object(p.jsx)(S,{})}var P=Object(n.createContext)(),B=function(e){var t=e.children,c=Object(n.useState)([]),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){h(a)}),[a.length]),Object(p.jsx)(P.Provider,{value:[s,a],children:t})},I=Object(n.createContext)(),E=function(e){var t=e.children,c=Object(n.useState)(1),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){a(s)}),[s]),Object(p.jsx)(I.Provider,{value:[s,a],children:t})};c(44);function R(e){var t=e.dataLimit,c=void 0===t?16:t,r=Object(n.useContext)(P),s=Object(i.a)(r,1)[0],a=Object(n.useContext)(I),o=Object(i.a)(a,2),u=o[0],j=o[1],l=Math.round(s.length/c),d=Math.min(u*c-c+c,s.length);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"paginationBar",children:[Object(p.jsxs)("div",{className:"paginationBar-sort",children:[Object(p.jsxs)("span",{children:[Object(p.jsx)("b",{children:d})," of ","",Object(p.jsx)("b",{children:s.length})," products"]}),Object(p.jsx)("div",{className:"paginationBar-sort_verticalLine"})]}),Object(p.jsxs)("div",{className:"paginationBar-arrows",children:[Object(p.jsx)("img",{src:"/assets/icons/arrow-left.svg",alt:"Arrow left icon",onClick:function(){j((function(e){return e-1}))},className:"prev ".concat(1===u?"disabled":"")}),Object(p.jsx)("img",{src:"/assets/icons/arrow-right.svg",alt:"Arrow right icon",onClick:function(){j((function(e){return e+1}))},className:"next ".concat(u===l?"disabled":"")})]})]}),Object(p.jsx)("div",{className:"paginationBar-separator"})]})}var L=Object(n.createContext)(),_=[{value:"Most Recent"},{value:"Highest Price"},{value:"Lowest Price"}],J=function(e){var t=e.children,c=Object(n.useState)(_[0].value),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(p.jsx)(L.Provider,{value:[s,a],children:t})};c(45);function T(){var e=Object(n.useContext)(L),t=Object(i.a)(e,2),c=t[0],r=t[1],s=function(e){r(e.target.value)};return Object(n.useEffect)((function(){r(c)}),[c,r]),Object(p.jsxs)("div",{className:"filterBar",children:[Object(p.jsx)("span",{children:"Sort by:"}),_.map((function(e,t){return Object(p.jsx)("button",{type:"button",value:e.value,className:"filterBar-sort_filter",onClick:s,children:e.value},t)}))]})}var A=c(21),F=c.n(A);c(56),c(57);function H(e){var t=e.name,c=e.category,r=e.img,s=e.cost,a=e.id,u=Object(n.useState)(!1),j=Object(i.a)(u,2),l=j[0],d=j[1],b=Object(n.useState)(!1),O=Object(i.a)(b,2),h=O[0],x=O[1],f=Object(n.useContext)(v),g=Object(i.a)(f,2),C=g[0],N=g[1];return Object(p.jsx)(p.Fragment,{children:l?Object(p.jsxs)("div",{className:"product hover",onMouseLeave:function(){return d(!1)},children:[Object(p.jsxs)("div",{className:"product-layer hover",children:[Object(p.jsx)("img",{className:"product-buyIcon hover",src:"/assets/icons/buy-white.svg",alt:"buy white icon"}),Object(p.jsxs)("div",{className:"product-value hover",children:[Object(p.jsx)("span",{children:s}),Object(p.jsx)("img",{src:"/assets/icons/coin.svg",alt:"Coin icon"})]}),Object(p.jsx)("button",{className:"product-redeem_button hover",type:"button",onClick:function(){!0===m&&x(!h),h?F.a.fire({customClass:{confirmButton:"swalBtnColor"},icon:"error",title:"Oops...Something went wrong",text:"Please try it in a few minutes!",timer:4e3}):F.a.fire({customClass:{confirmButton:"swalBtnColor"},icon:"success",title:"Congratulations!",text:"You've redeem the product successfully!",timer:4e3}),function(e,t,c){var n=m(e),r=c-t;N(Object(o.a)(Object(o.a)({},C),{},{points:r})),x(n)}(a)},children:"Redeem now"})]}),Object(p.jsx)("img",{className:"product-img",src:r.hdUrl,alt:"product"}),Object(p.jsx)("div",{className:"product-separator"}),Object(p.jsx)("span",{children:c}),Object(p.jsx)("h3",{children:t})]}):Object(p.jsxs)("div",{className:"product",onMouseEnter:function(){return d(!0)},children:[Object(p.jsx)("img",{className:"product-buyIcon",src:"/assets/icons/buy-blue.svg",alt:"buy blue icon"}),Object(p.jsx)("img",{lazy:"loading",className:"product-img",src:r.url,alt:"product"}),Object(p.jsx)("div",{className:"product-separator"}),Object(p.jsx)("span",{children:c}),Object(p.jsx)("h3",{children:t})]})})}c(58);function Y(e){var t=e.dataLimit,c=void 0===t?16:t,r=Object(n.useContext)(P),s=Object(i.a)(r,1)[0],a=Object(n.useContext)(I),o=Object(i.a)(a,1)[0],u=Object(n.useContext)(L),j=Object(i.a)(u,1)[0],l=Object(n.useMemo)((function(){switch(j){case"Highest Price":return Object(w.a)(s).sort((function(e,t){return t.cost-e.cost}));case"Lowest Price":return Object(w.a)(s).sort((function(e,t){return e.cost-t.cost}));case"Most Recent":default:return s}}),[j,s]);return Object(p.jsx)("main",{className:"productsList",children:function(){var e=o*c-c,t=e+c;return l.slice(e,t)}().map((function(e){return Object(p.jsx)(H,{name:e.name,category:e.category,img:e.img,cost:e.cost,id:e._id},e._id)}))})}c(59);function z(){return Object(p.jsxs)("div",{className:"hero",children:[Object(p.jsx)("img",{src:"/assets/header-x1.png",alt:"Hero img"}),Object(p.jsx)("h1",{children:"Electronics"})]})}function D(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(z,{}),Object(p.jsxs)("section",{className:"principalBar",children:[Object(p.jsx)(R,{}),Object(p.jsx)(T,{})]}),Object(p.jsx)(Y,{}),Object(p.jsx)(R,{})]})}var G=c(3);c(60);var U=function(){return Object(p.jsx)(g,{children:Object(p.jsx)(B,{children:Object(p.jsx)(E,{children:Object(p.jsx)(J,{children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(y,{}),Object(p.jsxs)(G.c,{children:[Object(p.jsx)(G.a,{exact:!0,path:"/home",component:D}),Object(p.jsx)(G.a,{path:"/redeem-history",component:M})]})]})})})})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),s(e),a(e)}))};a.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(C.a,{children:Object(p.jsx)(U,{})})}),document.getElementById("root")),X()}},[[61,1,2]]]);
//# sourceMappingURL=main.fdb42e4b.chunk.js.map